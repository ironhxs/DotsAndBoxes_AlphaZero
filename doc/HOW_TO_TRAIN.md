# ğŸš€ AlphaZero ç‚¹æ ¼æ£‹ - è®­ç»ƒæŒ‡å—

## ğŸ“¦ é¡¹ç›®æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
```
game.py              # ç‚¹æ ¼æ£‹æ¸¸æˆå°è£…
model.py             # ResNetç¥ç»ç½‘ç»œ 
mcts.py              # è’™ç‰¹å¡æ´›æ ‘æœç´¢
coach.py             # è®­ç»ƒåè°ƒå™¨ï¼ˆå•è¿›ç¨‹ï¼‰
coach_parallel.py    # è®­ç»ƒåè°ƒå™¨ï¼ˆå¤šè¿›ç¨‹å¹¶è¡Œï¼‰â­
```

### è®­ç»ƒè„šæœ¬
```
extreme_train.py     # ğŸ”¥ æé™ä¼˜åŒ–è®­ç»ƒï¼ˆæ¨èï¼‰
quick_train.py       # âš¡ å¿«é€Ÿæµ‹è¯•è®­ç»ƒ
main.py              # ğŸ“Š å®Œæ•´è®­ç»ƒï¼ˆ1000è¿­ä»£ï¼‰
play.py              # ğŸ® äººæœºå¯¹æˆ˜
test_project.py      # ğŸ§ª ç¯å¢ƒæµ‹è¯•
```

### å¯åŠ¨è„šæœ¬
```
start_training.sh    # ä¸€é”®å¯åŠ¨èœå•
monitor_gpu.sh       # GPUå®æ—¶ç›‘æ§
quick_monitor.sh     # GPUå¿«é€ŸæŸ¥çœ‹
```

## ğŸ¯ å¦‚ä½•è®­ç»ƒ

### æ–¹æ³•1ï¸âƒ£: ä½¿ç”¨ä¸€é”®è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰â­

```bash
cd /HFUT_002/DotsAndBoxes_AlphaZero
./start_training.sh
```

ç„¶åé€‰æ‹©ï¼š
- **é€‰é¡¹3** - æé™è®­ç»ƒï¼ˆæ¨èï¼Œæœ€ä¼˜æ€§èƒ½ï¼‰
- é€‰é¡¹2 - å¿«é€Ÿè®­ç»ƒï¼ˆæµ‹è¯•ç”¨ï¼‰
- é€‰é¡¹1 - è¶…å¿«æµ‹è¯•ï¼ˆéªŒè¯ç¯å¢ƒï¼‰

### æ–¹æ³•2ï¸âƒ£: ç›´æ¥è¿è¡Œè„šæœ¬

#### ğŸ”¥ æ¨èï¼šæé™ä¼˜åŒ–è®­ç»ƒ
```bash
cd /HFUT_002/DotsAndBoxes_AlphaZero
/root/miniconda3/envs/gmd/bin/python extreme_train.py
```

**ç‰¹ç‚¹**:
- âœ… 6è¿›ç¨‹å¹¶è¡Œè‡ªæˆ‘å¯¹å¼ˆï¼ˆCPUå……åˆ†åˆ©ç”¨ï¼‰
- âœ… è¶…å¤§batch (2048) + æ·±åº¦ç½‘ç»œï¼ˆ1775ä¸‡å‚æ•°ï¼‰
- âœ… GPUåˆ©ç”¨ç‡ 70%+
- âœ… é€Ÿåº¦ï¼š1.06ç§’/å±€ï¼Œ3åˆ†é’Ÿ/è¿­ä»£
- âœ… æœ€ä½³æ€§èƒ½é…ç½®

#### âš¡ å¿«é€Ÿæµ‹è¯•è®­ç»ƒ
```bash
/root/miniconda3/envs/gmd/bin/python quick_train.py
```

**é€‚ç”¨äº**:
- å¿«é€ŸéªŒè¯ç¯å¢ƒæ˜¯å¦æ­£å¸¸
- æµ‹è¯•ä¿®æ”¹åçš„ä»£ç 
- 2åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

#### ğŸ“Š å®Œæ•´é•¿æ—¶è®­ç»ƒ
```bash
/root/miniconda3/envs/gmd/bin/python main.py
```

**é€‚ç”¨äº**:
- 1000æ¬¡è¿­ä»£å®Œæ•´è®­ç»ƒï¼ˆéœ€è¦2-3å¤©ï¼‰
- è®­ç»ƒé«˜è´¨é‡æ¨¡å‹

## ğŸ“Š è®­ç»ƒè¿‡ç¨‹ç›‘æ§

### å¼€å¯GPUç›‘æ§ï¼ˆæ¨èï¼‰

**åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ**:
```bash
cd /HFUT_002/DotsAndBoxes_AlphaZero

# å®æ—¶ç›‘æ§
./monitor_gpu.sh

# æˆ–å¿«é€ŸæŸ¥çœ‹
./quick_monitor.sh
```

### æŸ¥çœ‹è®­ç»ƒè¾“å‡º

è®­ç»ƒæ—¶ä½ ä¼šçœ‹åˆ°ï¼š
```
============================================================
è¿­ä»£ 1/2
============================================================
å¹¶è¡Œè‡ªæˆ‘å¯¹å¼ˆ(6è¿›ç¨‹): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 80/80 [01:25<00:00,  1.06s/it]
âœ“ æ”¶é›†åˆ° 4800 ä¸ªè®­ç»ƒæ ·æœ¬

Epoch 1/40
Training: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:01<00:00,  1.46it/s]
  Loss: Ï€=4.16, v=1.06, total=5.21

Epoch 10/40
  Loss: Ï€=3.40, v=0.93, total=4.33

Epoch 40/40
  Loss: Ï€=2.52, v=0.81, total=3.33  â† æŸå¤±ä¸‹é™è¯´æ˜æ­£å¸¸

æ¨¡å‹å·²ä¿å­˜: ./checkpoints/checkpoint_1.pth
```

**å…³é”®æŒ‡æ ‡**:
- è‡ªæˆ‘å¯¹å¼ˆé€Ÿåº¦: ~1.0ç§’/å±€ âœ…
- è®­ç»ƒé€Ÿåº¦: ~4.5 batch/sï¼ˆEpoch 2+ï¼‰âœ…
- æŸå¤±ä¸‹é™: 5.2 â†’ 3.3 âœ…
- GPUåˆ©ç”¨ç‡: >60% âœ…

## ğŸ® è®­ç»ƒåå¯¹æˆ˜

è®­ç»ƒå®Œæˆåï¼Œå¯ä»¥ä¸AIå¯¹æˆ˜ï¼š

```bash
/root/miniconda3/envs/gmd/bin/python play.py
```

éœ€è¦å­˜åœ¨æ¨¡å‹æ–‡ä»¶ï¼š`checkpoints/latest.pth`

## âš™ï¸ è°ƒæ•´è®­ç»ƒå‚æ•°

### ä¿®æ”¹ extreme_train.py

```python
args = {
    # æ¸¸æˆé…ç½®
    'num_rows': 5,              # æ£‹ç›˜å¤§å°
    'num_cols': 5,
    
    # MCTSé…ç½®
    'num_simulations': 15,      # â†‘å¢åŠ æå‡è´¨é‡ï¼Œâ†“å‡å°‘æå‡é€Ÿåº¦
    
    # è®­ç»ƒè§„æ¨¡
    'num_iterations': 2,        # æ€»è¿­ä»£æ¬¡æ•°ï¼ˆæ”¹ä¸º100-1000ç”¨äºå®Œæ•´è®­ç»ƒï¼‰
    'num_episodes': 80,         # æ¯æ¬¡è¿­ä»£çš„æ¸¸æˆæ•°
    
    # å¹¶è¡Œé…ç½®
    'num_parallel_workers': 6,  # å¹¶è¡Œè¿›ç¨‹æ•°ï¼ˆå»ºè®®=CPUæ ¸å¿ƒæ•°/16ï¼‰
    
    # GPUé…ç½®
    'batch_size': 2048,         # â†‘å¢åŠ æå‡GPUåˆ©ç”¨ç‡ï¼ˆæ³¨æ„æ˜¾å­˜ï¼‰
    'epochs': 40,               # è®­ç»ƒè½®æ•°
    
    # æ¨¡å‹é…ç½®
    'num_filters': 256,         # ç½‘ç»œé€šé“æ•°
    'num_res_blocks': 15,       # æ®‹å·®å—å±‚æ•°
    
    # ä¼˜åŒ–å™¨
    'lr': 0.003,               # å­¦ä¹ ç‡
}
```

### ä¸åŒç¡¬ä»¶æ¨èé…ç½®

**RTX 4090 (24GB)** - å½“å‰é…ç½®æœ€ä¼˜ âœ…
```python
batch_size=2048, num_filters=256, num_res_blocks=15
```

**RTX 4080 (16GB)**
```python
batch_size=1024, num_filters=192, num_res_blocks=12
```

**RTX 3060 (12GB)**
```python
batch_size=512, num_filters=128, num_res_blocks=8
```

## ğŸ› å¸¸è§é—®é¢˜

### âŒ æ˜¾å­˜ä¸è¶³ (OOM)
```bash
è§£å†³ï¼šå‡å° batch_size æˆ– num_filters
ä¾‹å¦‚ï¼šbatch_size=1024, num_filters=192
```

### âŒ è‡ªæˆ‘å¯¹å¼ˆå¤ªæ…¢
```bash
è§£å†³ï¼šå‡å°‘ num_simulations æˆ–å¢åŠ  num_parallel_workers
ä¾‹å¦‚ï¼šnum_simulations=10, num_parallel_workers=8
```

### âŒ GPUåˆ©ç”¨ç‡ä½
```bash
è§£å†³ï¼šå¢å¤§ batch_size, epochs, num_filters
ä¾‹å¦‚ï¼šbatch_size=4096, epochs=50
```

### âŒ è®­ç»ƒä¸æ”¶æ•›ï¼ˆlossä¸é™ï¼‰
```bash
è§£å†³ï¼š
1. é™ä½å­¦ä¹ ç‡ï¼šlr=0.001
2. å¢åŠ æ¸¸æˆæ•°ï¼šnum_episodes=100
3. æé«˜MCTSè´¨é‡ï¼šnum_simulations=25
```

## ğŸ“ˆ è®­ç»ƒè¿›åº¦è¿½è¸ª

### æ¨¡å‹ä¿å­˜ä½ç½®
```
checkpoints/
â”œâ”€â”€ latest.pth           # æœ€æ–°æ¨¡å‹
â”œâ”€â”€ checkpoint_1.pth     # ç¬¬1æ¬¡è¿­ä»£
â”œâ”€â”€ checkpoint_10.pth    # ç¬¬10æ¬¡è¿­ä»£
â””â”€â”€ ...
```

### ç»§ç»­è®­ç»ƒï¼ˆTODOï¼‰

å¦‚æœè®­ç»ƒä¸­æ–­ï¼Œä¿®æ”¹ä»£ç åŠ è½½æ¨¡å‹ï¼š
```python
# åœ¨ extreme_train.py ä¸­æ·»åŠ 
if os.path.exists('checkpoints/latest.pth'):
    checkpoint = torch.load('checkpoints/latest.pth')
    nnet.load_state_dict(checkpoint['state_dict'])
    print("âœ“ å·²åŠ è½½ä¹‹å‰çš„æ¨¡å‹ç»§ç»­è®­ç»ƒ")
```

## ğŸ† æ¨èè®­ç»ƒæµç¨‹

### æ–°æ‰‹æµç¨‹
```bash
# 1. éªŒè¯ç¯å¢ƒï¼ˆ2åˆ†é’Ÿï¼‰
./start_training.sh  # é€‰æ‹© 1

# 2. å¿«é€Ÿè®­ç»ƒä½“éªŒï¼ˆ10åˆ†é’Ÿï¼‰
./start_training.sh  # é€‰æ‹© 2

# 3. æé™è®­ç»ƒï¼ˆæ­£å¼ï¼‰
./start_training.sh  # é€‰æ‹© 3
# ä¿®æ”¹ extreme_train.py: num_iterations=100

# 4. äººæœºå¯¹æˆ˜
python play.py
```

### å®Œæ•´è®­ç»ƒæµç¨‹
```bash
# 1. æµ‹è¯•ç¯å¢ƒ
python test_project.py

# 2. å¼€å¯GPUç›‘æ§ï¼ˆç»ˆç«¯1ï¼‰
./monitor_gpu.sh

# 3. å¯åŠ¨è®­ç»ƒï¼ˆç»ˆç«¯2ï¼‰
python extreme_train.py
# ä¿®æ”¹ï¼šnum_iterations=1000ï¼ˆéœ€è¦2-3å¤©ï¼‰

# 4. å®šæœŸæ£€æŸ¥
tail -f extreme_train_log.txt
```

## ğŸ“š æ›´å¤šæ–‡æ¡£

- **å®Œæ•´ä¼˜åŒ–æŠ¥å‘Š**: `FINAL_OPTIMIZATION_REPORT.md`
- **æ€§èƒ½ä¼˜åŒ–æŒ‡å—**: `PERFORMANCE_OPTIMIZATION.md`
- **CPUä¼˜åŒ–æŠ€æœ¯**: `CPU_OPTIMIZATION.md`
- **å¿«é€Ÿå¼€å§‹**: `QUICK_START.md`

---

## ğŸš€ ç°åœ¨å°±å¼€å§‹è®­ç»ƒï¼

```bash
cd /HFUT_002/DotsAndBoxes_AlphaZero
./start_training.sh
```

é€‰æ‹© **é€‰é¡¹3ï¼ˆæé™è®­ç»ƒï¼‰**ï¼Œäº«å—æœ€ä¼˜æ€§èƒ½ï¼ğŸ”¥
